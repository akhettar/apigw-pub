{
  "swagger":"2.0",
  "info":{
    "description":"The OCR Service is used to manage uploaded files and metadata such as invoices and ocr",
    "version":"1.0",
    "title":"OCR Service"
  },
  "host":"internal-api.dev.astoapp.co.uk",
  "basePath":"/ocr-api-service/",
  "tags":[
    {
      "name":"ocr-controller",
      "description":"OCR Controller"
    }
  ],
  "paths":{
    "/ocrs":{
      "get":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Retrieve metadata about all OCR files",
        "operationId":"retrieveMetadataListUsingGET",
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"direction",
            "in":"query",
            "description":"direction",
            "required":false,
            "type":"string"
          },
          {
            "name":"orderBy",
            "in":"query",
            "description":"orderBy",
            "required":false,
            "type":"string"
          },
          {
            "name":"pageNumber",
            "in":"query",
            "description":"pageNumber",
            "required":false,
            "type":"string"
          },
          {
            "name":"pageSize",
            "in":"query",
            "description":"pageSize",
            "required":false,
            "type":"string"
          },
          {
            "name":"receiptEndDate",
            "in":"query",
            "description":"receiptEndDate",
            "required":false,
            "type":"string"
          },
          {
            "name":"receiptStartDate",
            "in":"query",
            "description":"receiptStartDate",
            "required":false,
            "type":"string"
          },
          {
            "name":"type",
            "in":"query",
            "description":"type",
            "required":false,
            "type":"string",
            "enum":[
              "INVOICE",
              "RECEIPT"
            ]
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«List«OCRMetadataDTO»»"
            }
          },
          "400":{
            "description":"Bad request",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      },
      "post":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Upload an OCR file",
        "operationId":"uploadUsingPOST",
        "consumes":[
          "multipart/form-data"
        ],
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"file",
            "in":"formData",
            "description":"file",
            "required":true,
            "type":"file"
          },
          {
            "in":"formData",
            "name":"type",
            "description":"type",
            "required":false,
            "schema":{
              "type":"string",
              "enum":[
                "INVOICE",
                "RECEIPT"
              ]
            }
          },
          {
            "in":"formData",
            "name":"userTimestamp",
            "description":"userTimestamp",
            "required":false,
            "schema":{
              "type":"string"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«OCRMetadataDTO»"
            }
          },
          "400":{
            "description":"Bad request",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/currencies":{
      "get":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Gets the available currencies within the OCR domain",
        "operationId":"getCurrenciesUsingGET",
        "produces":[
          "*/*"
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«CurrencyConfiguration»"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/export":{
      "get":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Kicks off an OCR data export",
        "operationId":"exportUsingGET",
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"exportCsv",
            "in":"query",
            "description":"exportCsv",
            "required":false,
            "type":"string",
            "default":"true",
            "allowEmptyValue":false,
            "enum":[
              "true",
              "false"
            ]
          },
          {
            "name":"exportZip",
            "in":"query",
            "description":"exportZip",
            "required":false,
            "type":"string",
            "default":"true",
            "allowEmptyValue":false,
            "enum":[
              "true",
              "false"
            ]
          },
          {
            "name":"receiptEndDate",
            "in":"query",
            "description":"receiptEndDate",
            "required":false,
            "type":"string",
            "allowEmptyValue":false,
            "x-example":"1988-07-16T12:00:00.000Z"
          },
          {
            "name":"receiptStartDate",
            "in":"query",
            "description":"receiptStartDate",
            "required":false,
            "type":"string",
            "allowEmptyValue":false,
            "x-example":"1988-07-15T12:00:00.000Z"
          }
        ],
        "responses":{
          "204":{
            "description":"No Content",
            "schema":{
              "$ref":"#/definitions/ResponseEntity"
            }
          },
          "400":{
            "description":"Bad request",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/total":{
      "get":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Calculate the total amount of money for processed OCRs",
        "operationId":"getTotalMoneyOutUsingGET",
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"currency",
            "in":"query",
            "description":"currency",
            "required":false,
            "type":"string",
            "default":"GBP"
          },
          {
            "name":"receiptEndDate",
            "in":"query",
            "description":"receiptEndDate",
            "required":false,
            "type":"string"
          },
          {
            "name":"receiptStartDate",
            "in":"query",
            "description":"receiptStartDate",
            "required":false,
            "type":"string"
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«Map«string,TotalAmountDTO»»"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/{ocrId}":{
      "get":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Retrieve a specific OCR metadata",
        "operationId":"getOCRMetadataUsingGET",
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"ocrId",
            "in":"path",
            "description":"ocrId",
            "required":true,
            "type":"string"
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«OCRMetadataDTO»"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "404":{
            "description":"Not found",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      },
      "delete":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Soft deletes an OCR File metadata",
        "operationId":"deleteOCRMetadataUsingDELETE",
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"ocrId",
            "in":"path",
            "description":"ocrId",
            "required":true,
            "type":"string"
          }
        ],
        "responses":{
          "204":{
            "description":"No Content",
            "schema":{
              "$ref":"#/definitions/ResponseEntity"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "404":{
            "description":"Not found",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "409":{
            "description":"Conflict",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/{ocrId}/data":{
      "patch":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Update the capture data of a specific OCR",
        "operationId":"updateOCRCaptureDataUsingPATCH",
        "consumes":[
          "application/json"
        ],
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "in":"body",
            "name":"captureData",
            "description":"captureData",
            "required":true,
            "schema":{
              "$ref":"#/definitions/OCRCaptureData"
            }
          },
          {
            "name":"ocrId",
            "in":"path",
            "description":"ocrId",
            "required":true,
            "type":"string"
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«OCRMetadataDTO»"
            }
          },
          "400":{
            "description":"Bad request",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "404":{
            "description":"Not found",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "409":{
            "description":"Conflict",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/{ocrId}/file":{
      "get":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Download an OCR file",
        "operationId":"downloadUsingGET",
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"ocrId",
            "in":"path",
            "description":"ocrId",
            "required":true,
            "type":"string"
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "type":"string",
              "format":"byte"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "404":{
            "description":"Object not found",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    },
    "/ocrs/{ocrId}/tags":{
      "patch":{
        "tags":[
          "ocr-controller"
        ],
        "summary":"Update the tags of a specific OCR",
        "operationId":"updateOCRTagsUsingPATCH",
        "consumes":[
          "application/json"
        ],
        "produces":[
          "*/*"
        ],
        "parameters":[
          {
            "name":"ocrId",
            "in":"path",
            "description":"ocrId",
            "required":true,
            "type":"string"
          },
          {
            "in":"body",
            "name":"tags",
            "description":"tags",
            "required":true,
            "schema":{
              "$ref":"#/definitions/OCRTags"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "schema":{
              "$ref":"#/definitions/ClientResponse«OCRMetadataDTO»"
            }
          },
          "400":{
            "description":"Bad request",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "401":{
            "description":"Unauthorized",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "404":{
            "description":"Not found",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          },
          "500":{
            "description":"Internal server error",
            "schema":{
              "$ref":"#/definitions/HttpExceptionResponse"
            }
          }
        },
        "deprecated":false,
        "x-asto-publish":"true"
      }
    }
  },
  "definitions":{
    "ClientResponse«CurrencyConfiguration»":{
      "type":"object",
      "properties":{
        "data":{
          "$ref":"#/definitions/CurrencyConfiguration"
        },
        "metadata":{
          "$ref":"#/definitions/ResponseMetadata"
        }
      },
      "title":"ClientResponse«CurrencyConfiguration»"
    },
    "ClientResponse«List«OCRMetadataDTO»»":{
      "type":"object",
      "properties":{
        "data":{
          "type":"array",
          "items":{
            "$ref":"#/definitions/OCRMetadataDTO"
          }
        },
        "metadata":{
          "$ref":"#/definitions/ResponseMetadata"
        }
      },
      "title":"ClientResponse«List«OCRMetadataDTO»»"
    },
    "ClientResponse«Map«string,TotalAmountDTO»»":{
      "type":"object",
      "properties":{
        "data":{
          "type":"object",
          "additionalProperties":{
            "$ref":"#/definitions/TotalAmountDTO"
          }
        },
        "metadata":{
          "$ref":"#/definitions/ResponseMetadata"
        }
      },
      "title":"ClientResponse«Map«string,TotalAmountDTO»»"
    },
    "ClientResponse«OCRMetadataDTO»":{
      "type":"object",
      "properties":{
        "data":{
          "$ref":"#/definitions/OCRMetadataDTO"
        },
        "metadata":{
          "$ref":"#/definitions/ResponseMetadata"
        }
      },
      "title":"ClientResponse«OCRMetadataDTO»"
    },
    "Currency":{
      "type":"object",
      "properties":{
        "code":{
          "type":"string"
        },
        "name":{
          "type":"string"
        },
        "symbol":{
          "type":"string"
        }
      },
      "title":"Currency"
    },
    "CurrencyConfiguration":{
      "type":"object",
      "properties":{
        "availableCurrencies":{
          "type":"array",
          "items":{
            "$ref":"#/definitions/Currency"
          }
        },
        "topCurrencies":{
          "type":"array",
          "items":{
            "$ref":"#/definitions/Currency"
          }
        }
      },
      "title":"CurrencyConfiguration"
    },
    "HttpExceptionResponse":{
      "type":"object",
      "properties":{
        "errors":{
          "type":"array",
          "items":{
            "type":"string"
          }
        },
        "message":{
          "type":"string"
        }
      },
      "title":"HttpExceptionResponse"
    },
    "InputStream":{
      "type":"object",
      "title":"InputStream"
    },
    "Map«string,TotalAmountDTO»":{
      "type":"object",
      "title":"Map«string,TotalAmountDTO»",
      "additionalProperties":{
        "$ref":"#/definitions/TotalAmountDTO"
      }
    },
    "OCRCaptureData":{
      "type":"object",
      "properties":{
        "amount":{
          "type":"number"
        },
        "currency":{
          "type":"string"
        },
        "date":{
          "type":"string",
          "format":"date-time"
        },
        "merchantName":{
          "type":"string"
        },
        "nonVat":{
          "type":"boolean"
        },
        "vat":{
          "type":"number"
        }
      },
      "title":"OCRCaptureData"
    },
    "OCRMetadataDTO":{
      "type":"object",
      "properties":{
        "data":{
          "$ref":"#/definitions/OCRCaptureData"
        },
        "filename":{
          "type":"string"
        },
        "ocrId":{
          "type":"string"
        },
        "status":{
          "type":"string",
          "enum":[
            "QUEUING_FAILED",
            "PROCESSING_FAILED",
            "PROCESSING",
            "PARTIALLY_PROCESSED",
            "INCOMPLETE",
            "COMPLETED",
            "FAILED",
            "FAILED_PROCESSING",
            "DELETED"
          ]
        },
        "tags":{
          "$ref":"#/definitions/OCRTags"
        },
        "uploadType":{
          "type":"string",
          "enum":[
            "INVOICE",
            "RECEIPT"
          ]
        },
        "userTimestamp":{
          "type":"string",
          "format":"date-time"
        }
      },
      "title":"OCRMetadataDTO"
    },
    "OCRTags":{
      "type":"object",
      "properties":{
        "ids":{
          "type":"array",
          "items":{
            "type":"string"
          }
        }
      },
      "title":"OCRTags"
    },
    "PagingInformation":{
      "type":"object",
      "properties":{
        "currentPageNumber":{
          "type":"integer",
          "format":"int32"
        },
        "pageSize":{
          "type":"integer",
          "format":"int32"
        },
        "totalHits":{
          "type":"integer",
          "format":"int64"
        },
        "totalPages":{
          "type":"integer",
          "format":"int32"
        }
      },
      "title":"PagingInformation"
    },
    "ResponseEntity":{
      "type":"object",
      "properties":{
        "body":{
          "type":"object"
        },
        "statusCode":{
          "type":"string",
          "enum":[
            "100",
            "101",
            "102",
            "103",
            "200",
            "201",
            "202",
            "203",
            "204",
            "205",
            "206",
            "207",
            "208",
            "226",
            "300",
            "301",
            "302",
            "303",
            "304",
            "305",
            "307",
            "308",
            "400",
            "401",
            "402",
            "403",
            "404",
            "405",
            "406",
            "407",
            "408",
            "409",
            "410",
            "411",
            "412",
            "413",
            "414",
            "415",
            "416",
            "417",
            "418",
            "419",
            "420",
            "421",
            "422",
            "423",
            "424",
            "426",
            "428",
            "429",
            "431",
            "451",
            "500",
            "501",
            "502",
            "503",
            "504",
            "505",
            "506",
            "507",
            "508",
            "509",
            "510",
            "511"
          ]
        },
        "statusCodeValue":{
          "type":"integer",
          "format":"int32"
        }
      },
      "title":"ResponseEntity"
    },
    "ResponseMetadata":{
      "type":"object",
      "properties":{
        "paging":{
          "$ref":"#/definitions/PagingInformation"
        }
      },
      "title":"ResponseMetadata"
    },
    "TotalAmountDTO":{
      "type":"object",
      "properties":{
        "amount":{
          "type":"number"
        },
        "count":{
          "type":"integer",
          "format":"int32"
        },
        "currency":{
          "type":"string"
        }
      },
      "title":"TotalAmountDTO"
    }
  }
}